<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="phaser.min.js"></script>
        <script type="text/javascript" src="libreria/movninja.js"></script>
    </head>



    <body>
        <div>Juego Animado</div>

        <script type="text/javascript">

            var game = new Phaser.Game(800, 600, Phaser.AUTO, '', {preload: preload, create: create, update: update});
            var score = 0;
            var scoreText;
            var shootKey;
            var jug;
            //var shootKey = game.input.keyboard.addKey(Phaser.Keyboard.S);


            function preload() {
                game.load.image('sky', 'assets/sky.png');
                game.load.image('ground', 'assets/platform.png');
                game.load.image('star', 'assets/star.png');
                game.load.spritesheet('dudeViejo', 'assets/dudeViejo.png', 32, 48);
                game.load.spritesheet('ninja', 'assets/movNinja7.png', 930, 840);
            }

            var platforms;
            var music;

            function create() {
                
                
                game.add.sprite(0, 0, 'star');
                //  We're going to be using physics, so enable the Arcade Physics system
                game.physics.startSystem(Phaser.Physics.ARCADE);

                //  A simple background for our game
                game.add.sprite(0, 0, 'sky');

                //  The platforms group contains the ground and the 2 ledges we can jump on
                platforms = game.add.group();

                //  We will enable physics for any object that is created in this group
                platforms.enableBody = true;

                // Here we create the ground.
                var ground = platforms.create(0, game.world.height - 64, 'ground');

                //  Scale it to fit the width of the game (the original sprite is 400x32 in size)
                ground.scale.setTo(2, 2);

                //  This stops it from falling away when you jump on it
                ground.body.immovable = true;

                //  Now let's create two ledges
                var ledge = platforms.create(400, 400, 'ground');

                ledge.body.immovable = true;

                ledge = platforms.create(-150, 250, 'ground');

                ledge.body.immovable = true;
                
                 cursors = game.input.keyboard.createCursorKeys();

//                game, posx, posy, key, frame,target,cursors
                jug = new movninja(game,0,500,'ninja',cursors);
                
//                game.add.sprite(200, 200, 'ninja');

                scoreText = game.add.text(16, 16, 'score: 0', {fontSize: '32px', fill: '#000'});

//                game.sound.setDecodedCallback([dis], start, this);
            }
            function update() {
                
                //PARA COMPLETAR
                //1) DISCRETIZAR EL MUNDO
                
                //2) COLISIONES Y BLOQUEO DE NINJA EN PELEA CON MONGOL
                
                //3) MOVIMIENTOS MONGOLES 
                
                //MOVIMIENTOS NINJA:
                game.physics.arcade.collide(jug, platforms);
                jug.update();
            }
        

        </script>

    </body>
</html>
